{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "object",
    "title": "Policy",
    "description": "A schema to define a unified policy with room for custom policy rules.",
    "type": "object",
    "properties": {
        "id": {
            "description": "Unique ID of the policy",
            "type": "string",
            "format": "uuid"
        },
        "status": {
            "description": "Status of the policy - ACTIVE, INACTIVE.",
            "type": "string",
            "enum": [
                "ACTIVE",
                "INACTIVE"
            ]
        },
        "creator": {
            "allOf": [
                {
                    "$ref": "https://.../Organization.yaml"
                },
                {
                    "description": "The entity responsible for issuing the policy."
                }
            ]
        },
        "type": {
            "type": "string"
        },
        "coverage": {
            "description": "Information about the area and time period for which the policy is applicable.",
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "spatial": {
                        "description": "Information about the area for which the policy is applicable.",
                        "type": "object",
                        "properties": {
                            "country": {
                                "description": "The Country to which the policy is applicable.",
                                "type": "string"
                            },
                            "city": {
                                "description": "The City to which the policy is applicable.",
                                "type": "string"
                            }
                        }
                    },
                    "temporal": {
                        "description": "Information about the time period for which the policy is applicable.",
                        "type": "object",
                        "properties": {
                            "start": {
                                "description": "The start time of the policy.",
                                "type": "string"
                            },
                            "end": {
                                "description": "The end time of the policy.",
                                "type": "string"
                            }
                        }
                    },
                    "subscribers": {
                        "description": "The list of subscribers to which the policy is applicable.",
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "geofences": {
            "description": "The list of geofences for which the policy is applicable.",
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "polygon": {
                        "description": "The list of coordinates that define the geofence.",
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "custom_policies": {
            "description": "List of custom policy rules.",
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "name": {
                        "description": "Name of the custom policy rule.",
                        "type": "string"
                    },
                    "reference": {
                        "description": "Reference to the custom policy rule documentation.",
                        "type": "string"
                    }
                }
            }
        }
    },
    "definitions": {
        "custom_policy_rule": {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string"
                },
                "rules": {
                    "type": "object"
                }
            }
        }
    }
}
